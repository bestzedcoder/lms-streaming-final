
server:
  port: ${PORT}
  servlet:
    context-path: ${API_PREFIX}


spring:
  application:
    name: LMS Streaming Platform
  servlet:
    multipart:
      max-file-size: 20MB
      max-request-size: 20MB
  datasource:
    url: ${DATABASE_URL}
    username: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
    driver-class-name: org.postgresql.Driver
  jpa:
    database: postgresql
    show-sql: false
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect
  data:
    redis:
      port: ${REDIS_PORT}
      host: ${REDIS_HOST}
      password: ${REDIS_PASSWORD}
      timeout: 6000
  rabbitmq:
    host: ${RABBITMQ_HOST}
    port: ${RABBITMQ_PORT}
    username: ${RABBITMQ_USERNAME}
    password: ${RABBITMQ_PASSWORD}
    listener:
      simple:
        retry:
          max-attempts: 3 # gửi tối đa 3 lần
          initial-interval: 2000 # mỗi lần cách 2s
          enabled: true
          multiplier: 1
  elasticsearch:
    uris: ${ELASTICSEARCH_URIS}
    username: ${ELASTIC_USERNAME}
    password: ${ELASTIC_PASSWORD}
  mail:
    host: ${MAIL_HOST}
    port: ${MAIL_PORT}
    username: ${MAIL_USERNAME}
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
  output:
    ansi:
      enabled: ALWAYS

app:
  security:
    jwt:
      secretKey: ${JWT_SECRET_KEY}
      accessExpiration: ${JWT_ACCESS_EXPIRATION}
      refreshExpiration: ${JWT_REFRESH_EXPIRATION}
  cloudinary:
    cloud-name: ${CLOUDINARY_CLOUD_NAME}
    api-key: ${CLOUDINARY_API_KEY}
    api-secret: ${CLOUDINARY_API_SECRET}

# --- cấu hình thông tin thanh toán ---
payment:
  # --- VNPAY ---
  vnpay:
    tmn-code: ${TMN_CODE}       # Lấy từ email VNPay gửi
    hash-secret: ${SECRET_KEY}  # Lấy từ email VNPay gửi
    pay-url: ${PAY_URL} # URL môi trường Test
    return-url: ${RETURN_URL} # Trả về Frontend sau khi thanh toán xong
    version: ${VERSION}
    command: ${COMMAND}
    order-type: ${ORDER_TYPE}

  # --- MOMO ---




# logging
logging:
  pattern:
    # Cấu hình console đẹp mắt cho việc debug
    console: "%clr(%d{HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}"

  level:
    # 1. Chỉnh root về WARN để tắt toàn bộ log rác của hệ thống
    root: INFO

    # 2. Tập trung log cho package Middleware của bạn
    com.hust.lms.streaming.middleware: INFO

    # Tắt triệt để các log từ framework
    org.hibernate: WARN


